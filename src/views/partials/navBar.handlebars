<header class="bg-white shadow-sm dark:bg-gray-950 sticky top-0 z-10">
  <div class="container mx-auto px-4 py-2 flex items-center justify-between">
    <!-- Mobile menu button -->
    <button class="md:hidden focus:outline-none" id="mobile-menu-button">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6 dark:text-gray-300"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16m-7 6h7"
        />
      </svg>
    </button>

    {{! logo }}
    <a class="flex items-center gap-2 md:mr-0" href="/home">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="h-6 w-6 dark:text-gray-400 dark:hover:text-blue-400"
      >
        <path d="m8 3 4 8 5-5 5 15H2L8 3z"></path>
      </svg>
      <span
        class="font-semibold text-lg dark:text-gray-400 dark:hover:text-blue-400"
      >LDM Store</span>
    </a>

    <!-- Navigation menu (hidden on mobile) -->
    <nav class="hidden md:flex items-center gap-6 lg:gap-12">
      <a
        class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
        href="/home"
      >Home</a>
      <li
        class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50 categoryDropdown"
        href=""
      >
        Categories â–¾
        <ul class="navCategories dark:bg-gray-600">
          <li><a
              class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
              href="/products?category=Tech"
            >Tech</a></li>
          <li><a
              class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
              href="/products?category=Leisure"
            >Leisure</a></li>
          <li><a
              class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
              href="/products?category=Food"
            >Food</a></li>
          <li><a
              class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
              href="/products?category=Living"
            >Home</a></li>
          <li><a
              class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
              href="/products?category=Wellness"
            >Wellness</a></li>
          <li><a
              class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
              href="/products?category=Fashion"
            >Fashion</a></li>
        </ul>
      </li>
      <a
        class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
        href="/products"
      >All products</a>
      <a
        class="text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-50"
        href="/contact"
      >Contact Us</a>
    </nav>

    <!-- Right side icons -->
    <div class="flex items-center gap-4">
      <!-- Search input (visible only on desktop) -->
      <div class="relative hidden sm:block">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-300"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.3-4.3"></path>
        </svg>
        <form class="search-form">
          <input
            class="w-full sm:w-56 h-8 pl-8 pr-4 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-600 dark:text-white search-input"
            placeholder="Search products..."
            type="search"
          />
        </form>
      </div>

      <!-- Cart button -->
      <a href="/cart" class="relative">
        <button
          class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-6 w-6 dark:text-gray-300"
          >
            <circle cx="8" cy="21" r="1"></circle>
            <circle cx="19" cy="21" r="1"></circle>
            <path
              d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"
            ></path>
          </svg>
          <span class="sr-only">Cart</span>
          <span
            class="absolute top-0 right-0 -mt-1 -mr-1 px-2 py-1 text-xs font-bold text-white bg-red-500 rounded-full dark:text-gray-100 dark:bg-slate-700 cart-count"
          >{{cartQuantity}}</span>
        </button>
      </a>

      <!-- Dark mode toggle -->
      <button
        class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full"
        id="dark-mode-toggle"
      >
        <svg
          id="light-mode-icon"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="h-6 w-6 dark:text-gray-300"
        >
          <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
        </svg>
        <svg
          id="dark-mode-icon"
          style="display: none;"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="h-6 w-6 text-yellow-500"
        >
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <span class="sr-only">Toggle dark mode</span>
      </button>

      <!-- Profile dropdown -->
      <div class="relative hidden md:block" id="profileNavContainer">
        <button
          class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="h-6 w-6 dark:text-gray-300"
          >
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span class="sr-only">Toggle profile menu</span>
        </button>

        <div
          id="profileDataNav"
          class="absolute right-0 mt-2 w-64 bg-white dark:bg-gray-900 rounded-md shadow-lg z-10 hidden"
        >
          <div class="p-4 border-b dark:border-gray-800">
            {{#if email}}
              <div class="flex items-center">
                <img
                  class="h-10 w-10 rounded-full mr-3 modal-trigger"
                  src="{{fullImageUrl}}"
                  alt="Profile picture"
                />
                <div>
                  <h2
                    class="text-lg font-bold text-gray-900 dark:text-gray-50"
                  >{{last_name}}, {{first_name}}</h2>
                  <p
                    class="text-sm text-gray-500 dark:text-gray-400"
                  >{{role}}</p>
                </div>
              </div>
              <div class="mt-4 space-y-2">
                <p class="text-sm"><span
                    class="text-gray-500 dark:text-gray-400"
                  >Email:</span>
                  <span
                    class="text-gray-900 dark:text-gray-50"
                  >{{email}}</span></p>
                <p class="text-sm"><span
                    class="text-gray-500 dark:text-gray-400"
                  >Age:</span>
                  <span
                    class="text-gray-900 dark:text-gray-50"
                  >{{age}}</span></p>
              </div>
              <div class="mt-4 space-y-2">
                <a
                  href="/edit"
                  class="block w-full bg-black text-gray-50 hover:bg-primary-600 focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:bg-primary-400 dark:text-gray-200 dark:hover:bg-primary-500 rounded-md px-4 py-2 font-medium text-center"
                >Edit Profile</a>
                <form
                  id="form-logout"
                  action="/api/sessions/current"
                  method="DELETE"
                >
                  <button
                    type="submit"
                    class="block w-full redButton text-gray-50 hover:bg-primary-600 focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:bg-primary-400 dark:text-gray-200 dark:hover:bg-primary-500 rounded-md px-4 py-2 font-medium text-center mt-2"
                  >Log out</button>
                </form>
              </div>
            {{else}}
              <a
                href="/login"
                class="block w-full bg-black text-gray-50 hover:bg-primary-600 focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:bg-gray-400 dark:text-gray-900 dark:hover:bg-primary-500 rounded-md px-4 py-2 font-medium text-center"
              >Login</a>
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile navigation menu (hidden by default) -->
  <div
    class="md:hidden hidden bg-white dark:bg-gray-800 shadow-lg"
    id="mobile-menu"
  >
    <div class="px-2 pt-2 pb-3 space-y-1">
      <a
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700"
        href="/home"
      >Home</a>
      <div class="relative">
        <button
          onclick="toggleDropdown()"
          class="w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700 flex justify-between items-center"
        >
          Categories
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 ml-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div id="dropdownMenu" class="hidden mt-2 space-y-1">
          <a
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"
            href="/products?category=Tech"
          >Tech</a>
          <a
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"
            href="/products?category=Leisure"
          >Leisure</a>
          <a
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"
            href="/products?category=Food"
          >Food</a>
          <a
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"
            href="/products?category=Home"
          >Home</a>
          <a
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"
            href="/products?category=Wellness"
          >Wellness</a>
          <a
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"
            href="/products?category=Fashion"
          >Fashion</a>
        </div>
      </div>
      <a
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700"
        href="/products"
      >All Products</a>
      <a
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700"
        href="/contact"
      >Contact Us</a>
    </div>
    <div class="px-4 py-3 border-t border-gray-200 dark:border-gray-700">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <img
            class="h-10 w-10 rounded-full"
            src="{{fullImageUrl}}"
            alt="Profile picture"
          />
        </div>
        <div class="ml-3">
          <div
            class="text-base font-medium text-gray-800 dark:text-gray-200"
          >{{first_name}} {{last_name}}</div>
          <div
            class="text-sm font-medium text-gray-500 dark:text-gray-400"
          >{{email}}</div>
        </div>
      </div>
      <div class="mt-3 space-y-1">
        <a
          href="/edit"
          class="block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700"
        >Edit Profile</a>
        <form
          id="mobile-form-logout"
          action="/api/sessions/current"
          method="DELETE"
        >
          <button
            type="submit"
            class="block w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700"
          >Log out</button>
        </form>
      </div>
    </div>
  </div>
</header>

<script src="/js/profile.js"></script>